{"version":3,"sources":["assets\\script\\tscript\\util\\SplashScreen.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\n/// <summary>\r\n/// 渐入渐出的状态\r\n/// </summary>\r\nexport enum FadeStatus\r\n{\r\n    None,\r\n    FadeIn,\r\n    FadeWait,\r\n    FadeOut,\r\n    FadeFinish\r\n}\r\n\r\n/// <summary>\r\n/// 渐入渐出的类型  \r\n/// </summary>\r\nexport enum SplashType\r\n{\r\n    None,\r\n\r\n    /// <summary>\r\n    /// 只执行淡入或者淡出中的一种\r\n    /// </summary>\r\n    SingleOnly,\r\n\r\n    /// <summary>\r\n    /// 加载完场景才淡出\r\n    /// </summary>\r\n    LoadSceneThenFadeOut,\r\n\r\n}\r\n\r\n@ccclass\r\nexport default class SplashScreen extends cc.Component {\r\n\r\n    public OnFadeInFinish:Function;\r\n\r\n    public OnFadeOutFinish:Function;\r\n\r\n    //Logo贴图\r\n    public splashLogo:cc.Sprite;\r\n\r\n    //渐入渐出速度\r\n    public fadeSpeed:number = 0.5;\r\n\r\n    //等待时间\r\n    public waitDuration:number = 0.84;\r\n\r\n    /// <summary>\r\n    /// 渐入渐出类型\r\n    /// </summary>\r\n    @property({type:cc.Enum(SplashType)})\r\n    private splashType:SplashType = SplashType.None;\r\n\r\n    /// <summary>\r\n    /// 渐入渐出的状态\r\n    /// </summary>\r\n    @property({type:cc.Enum(FadeStatus)})\r\n    private mStatus:FadeStatus = FadeStatus.None;\r\n\r\n\r\n    //Logo贴图位置\r\n    private mSplashLogoPos:cc.Rect;\r\n\r\n    //当前透明度\r\n    private mAlpha:number = 0.0;\r\n\r\n    //渐入结束到渐出的时间\r\n    private waitTime:number;\r\n\r\n    /// <summary>\r\n    /// 延迟时间\r\n    /// </summary>\r\n    private delay:number;\r\n\r\n    onLoad()\r\n    {\r\n\r\n    }\r\n\r\n    start()\r\n    {\r\n        //计算Logo绘制的位置\r\n        //this.mSplashLogoPos.x = (cc.winSize.width * 0.5 - 1920 * 0.5);\r\n        //this.mSplashLogoPos.y = (cc.winSize.height * 0.5 - 1080 * 0.5);\r\n        this.mSplashLogoPos.x = 0;\r\n        this.mSplashLogoPos.y = 0;\r\n        this.mSplashLogoPos.width = cc.winSize.width;\r\n        this.mSplashLogoPos.height = cc.winSize.height;\r\n\r\n    }\r\n\r\n    /// <summary>\r\n    /// 播发特效\r\n    /// </summary>\r\n    /// <param name=\"sceneLoadedFadeOut\">是否是加载完场景后才淡出</param>\r\n    public PlaySplash(fadeSpeed:number = 1.0,waitDuration:number = 0.85,delay:number = 0):void\r\n    {\r\n        this.fadeSpeed = fadeSpeed;\r\n        this.waitDuration = waitDuration;\r\n        this.delay = delay;\r\n        this.splashType = SplashType.None;\r\n        this.mStatus = FadeStatus.FadeIn;\r\n    }\r\n\r\n    /// <summary>\r\n    /// 播放淡入特效\r\n    /// </summary>\r\n    public PlaySplashFadeIn(fadeSpeed:number = 1.0, delay:number = 0):void\r\n    {\r\n        this.fadeSpeed = fadeSpeed;\r\n        this.delay = delay;\r\n        this.splashType = SplashType.SingleOnly;\r\n        this.mStatus = FadeStatus.FadeIn;\r\n        this.mAlpha = 0.0;\r\n    }\r\n\r\n    /// <summary>\r\n    /// 播放淡出特效\r\n    /// </summary>\r\n    public PlaySplashFadeOut(fadeSpeed:number = 1.0,delay:number = 0):void\r\n    {\r\n        this.fadeSpeed = fadeSpeed;\r\n        this.delay = delay;\r\n        this.splashType = SplashType.SingleOnly;\r\n        this.mStatus = FadeStatus.FadeOut;\r\n        this.mAlpha = 1.0;\r\n    }\r\n\r\n    update(dt)\r\n    {\r\n\r\n        if (this.delay > 0)\r\n        {\r\n            this.delay -= dt;\r\n            return;\r\n        }\r\n\r\n        switch (this.mStatus)\r\n        {\r\n            case FadeStatus.FadeIn:\r\n\r\n                this.mAlpha += this.fadeSpeed * dt;\r\n\r\n                if (this.mAlpha >= 1.0)\r\n                {\r\n                    if(this.splashType != SplashType.SingleOnly)\r\n                    {\r\n                        this.mStatus = FadeStatus.FadeWait;\r\n                        this.waitTime = this.waitDuration;\r\n                    }\r\n                    \r\n                    this.mAlpha = 1.0;\r\n\r\n                    if (this.OnFadeInFinish != null)\r\n                    this.OnFadeInFinish();\r\n                }\r\n\r\n                break;\r\n            case FadeStatus.FadeOut:\r\n\r\n            this.mAlpha -= this.fadeSpeed * dt;\r\n\r\n                if (this.mAlpha <= 0.0)\r\n                {\r\n                    this.mStatus = FadeStatus.FadeFinish;\r\n                    this.mAlpha = 0.0;\r\n\r\n                    if (this.OnFadeOutFinish != null)\r\n                    this.OnFadeOutFinish();\r\n\r\n                }\r\n\r\n                break;\r\n            case FadeStatus.FadeWait:\r\n\r\n                if (this.splashType != SplashType.SingleOnly)\r\n                {\r\n                    this.waitTime -= dt;\r\n                    if (this.waitTime <= 0)\r\n                    {\r\n                        this.mStatus = FadeStatus.FadeOut;\r\n                        this.waitTime = 0;\r\n                    }\r\n                }\r\n                \r\n                break;\r\n        }\r\n    }\r\n    lateUpdate()\r\n    {\r\n        if (this.splashLogo != null)\r\n        {\r\n            //绘制Logo\r\n            //GUI.color = new Color(GUI.color.r, GUI.color.g, GUI.color.b, Mathf.Clamp(mAlpha, 0, 1));\r\n            //GUI.DrawTexture(mSplashLogoPos, splashLogo);\r\n        }\r\n\r\n    }\r\n    \r\n    /*void OnLevelWasLoaded(int index)\r\n    {\r\n        if(splashType == SplashType.LoadSceneThenFadeOut)\r\n        {\r\n            mStatus = FadeStatus.FadeOut;\r\n        }\r\n\r\n        //PlaySplashFadeOut(0.5f,0.25f);\r\n\r\n        OnFadeInFinish = null;\r\n        OnFadeOutFinish = null;\r\n    }*/\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // update (dt) {}\r\n}\r\n"]}