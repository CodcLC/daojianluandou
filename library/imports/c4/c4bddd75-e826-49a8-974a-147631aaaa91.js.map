{"version":3,"sources":["assets\\script\\tscript\\gamescene\\KnifePool.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Player, { PlayerStatus } from \"./Player\";\r\nimport Knife, { KnifeType, KnifeStatus } from \"./Knife\";\r\nimport Random from \"../util/Random\";\r\nimport GameManager from \"../core/GameManager\";\r\nimport CommonUils from \"../util/CommonUils\";\r\nimport DataManager from \"../core/DataManager\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class KnifePool extends cc.Component {\r\n\r\n    \r\n    @property(Player)\r\n    public player:Player = null;\r\n\r\n    public radius:number = 125;\r\n\r\n    public rotaSpeed = 180;\r\n\r\n    private rotaAngle:number = 0;\r\n\r\n    public knifes:Array<Knife> = []; \r\n\r\n\r\n    private limitNum:number = 25;\r\n    private baseNum:number = 100;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n        this.knifes = this.getComponentsInChildren(Knife);\r\n\r\n        //this.initKnife(this.initCount);\r\n\r\n        \r\n        this.changeDefenceState();\r\n\r\n        /*cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,(event)=>{\r\n\r\n            switch(event.keyCode)\r\n            {\r\n                case cc.macro.KEY.a:\r\n\r\n                this.refresh();\r\n\r\n                break;\r\n\r\n                case cc.macro.KEY.s:\r\n\r\n                this.refresh2();\r\n\r\n                break;\r\n\r\n                case cc.macro.KEY.d:\r\n\r\n\r\n                cc.log(\"场景飞刀数\",this.player.gameScene.knifeArr.length);\r\n\r\n                \r\n                break;\r\n            }\r\n        })*/\r\n\r\n\r\n    }\r\n\r\n     update (dt) \r\n     {\r\n        this.rotaAngle -= dt * this.rotaSpeed * this.player.rotaSpeedUp;\r\n        this.rotaAngle %= 360;\r\n        this.node.angle = this.rotaAngle;\r\n     }\r\n\r\n     public initKnife(count:number)\r\n     {\r\n\r\n        var tempKnife:Array<Knife> = this.knifes.slice();\r\n\r\n        for(var i = 0 ; i < tempKnife.length ; i++)\r\n        {\r\n            this.removeKnife(tempKnife[i]);\r\n            tempKnife[i].destroySelf();\r\n        }\r\n\r\n        for(var i = 0 ; i < count ; i++)\r\n        {\r\n            var knife:Knife = GameManager.instance.getKnife(KnifeType.normal);\r\n            this.addKnife(knife);\r\n        }\r\n     }\r\n\r\n     public addKnife(knife:Knife)\r\n     {\r\n         if(this.knifes.indexOf(knife) != -1)\r\n         {\r\n             return;\r\n         }\r\n\r\n\r\n        if(knife.node.parent != null)\r\n        {\r\n            var worldPos:cc.Vec2 = knife.node.parent.convertToWorldSpaceAR(knife.node.position);\r\n            var relaPos:cc.Vec2 = this.node.convertToNodeSpaceAR(worldPos);\r\n            knife.node.position = relaPos;\r\n        }\r\n\r\n        knife.node.parent = this.node;\r\n        knife.player = this.player;\r\n        knife.status = KnifeStatus.capture;\r\n        knife.setSkin(this.player.knifeId);\r\n        this.knifes.push(knife);\r\n\r\n        if(!this.player.isAI)\r\n        {\r\n            if(this.knifes.length > DataManager.instance.getPlayerData().knives)\r\n            {\r\n                DataManager.instance.getPlayerData().knives = this.knifes.length;\r\n                DataManager.instance.saveLevelData();\r\n            }\r\n        }\r\n\r\n\r\n        if(this.player.status == PlayerStatus.defence)\r\n        {\r\n            this.changeDefenceState();\r\n        }\r\n        else if(this.player.status == PlayerStatus.attack)\r\n        {\r\n            this.changeAttackState();\r\n        }\r\n\r\n     }\r\n\r\n     public updateKnifesSkin(knifeId:number)\r\n     {\r\n         var len:number = this.knifes.length;\r\n         for(var i = 0 ; i < len ; i++)\r\n         {\r\n             this.knifes[i].setSkin(knifeId);\r\n         }\r\n     }\r\n\r\n     public removeKnife(knife:Knife)\r\n     {\r\n        var index:number = this.knifes.indexOf(knife);\r\n\r\n        if(index != -1)\r\n        {\r\n            this.knifes.splice(index,1);\r\n            \r\n            if(this.player.status == PlayerStatus.defence)\r\n            {\r\n                this.changeDefenceState();\r\n            }\r\n            else if(this.player.status == PlayerStatus.attack)\r\n            {\r\n                this.changeAttackState();\r\n            }\r\n\r\n        }\r\n     }\r\n\r\n     public disposeAllKnifes()\r\n     {\r\n         var arr:Array<Knife> = this.knifes.slice();\r\n         for(var i = 0 ; i < arr.length ; i++)\r\n         {\r\n\r\n            var dir:cc.Vec2 = cc.v2(Random.Range(-1,1),Random.Range(-1,1)).normalize();\r\n             arr[i].fly(dir);\r\n         }\r\n     }\r\n\r\n     /**\r\n      * 切换防御状态\r\n      */\r\n     public changeDefenceState()\r\n     {\r\n        var len:number = this.knifes.length;\r\n\r\n        var angle:number = 2 * Math.PI / len;\r\n        var eulerAngle = 360 / len;\r\n\r\n\r\n        //var t = 1 / len;\r\n\r\n        /*if(t > 0.1)\r\n        {\r\n            t > 0.1\r\n        }\r\n\r\n        if(t <= 0.001)\r\n        {\r\n            t = 0.001;\r\n        }\r\n\r\n        this.schedule(()=>{\r\n\r\n            var knife:Knife = this.knifes[i];\r\n            if(!knife)\r\n                return;\r\n\r\n            knife.node.stopAllActions();\r\n\r\n            var pos:cc.Vec2 = cc.v2(this.radius * Math.cos(i * angle),this.radius * Math.sin(i * angle));\r\n            knife.setPos(pos);\r\n            knife.setRota(90 - i * eulerAngle);\r\n            //knife.setScale(Random.Range(1,4));\r\n\r\n            i++;\r\n        },t,len - 1)*/\r\n\r\n        //this.radius = 160 + Math.floor(len/10) * 30;\r\n\r\n        var rd:number = len < 10 ? 10 : len;\r\n\r\n        var radiusScale = len / this.baseNum + (1 - this.limitNum /this.baseNum);\r\n\r\n        this.radius = (133.9308 * radiusScale + rd * 5.3564);\r\n        this.rotaSpeed = 144;\r\n        this.player.size = (115 + len * 1.94) / 115;\r\n        this.player.pickRadius = this.radius;\r\n\r\n        for(var i = 0 ; i < len ; i++)\r\n        {\r\n            var knife:Knife = this.knifes[i];\r\n\r\n            knife.node.stopAllActions();\r\n\r\n            if(len >= this.limitNum)\r\n            {\r\n                knife.node.scale = ((i % 5 + 1) / 5 * 0.6 + 0.75);  \r\n            }else\r\n            {\r\n                //knife.node.scale = 1;\r\n                knife.node.scale = radiusScale;\r\n            }\r\n\r\n            var pos:cc.Vec2 = cc.v2(this.radius * Math.cos(i * angle),this.radius * Math.sin(i * angle));\r\n            knife.setPos(pos);\r\n            knife.setRota(90 - i * eulerAngle);\r\n            //knife.setScale(Random.Range(1,4));\r\n\r\n        }\r\n     }\r\n\r\n     /**\r\n      * 切换进攻状态\r\n      */\r\n     public changeAttackState()\r\n     {\r\n        var len:number = this.knifes.length;\r\n\r\n        var angle:number = 2 * Math.PI / len;\r\n        var eulerAngle = 360 / len;\r\n\r\n        //this.radius = 160 + Math.floor(len/10) * 30;\r\n\r\n        var rd:number = len < 10 ? 10 : len;\r\n\r\n        var radiusScale = len / this.baseNum + (1 - this.limitNum /this.baseNum);\r\n\r\n        this.radius = 133.9308 * radiusScale + rd * 5.3564 + 90  * radiusScale;\r\n        this.rotaSpeed = 160;\r\n        this.player.size = (115 + len * 1.94) / 115;\r\n        this.player.pickRadius = this.radius;\r\n\r\n        for(var i = 0 ; i < len ; i++)\r\n        {\r\n            var knife:Knife = this.knifes[i];\r\n\r\n            knife.node.stopAllActions();\r\n\r\n            if(len >= this.limitNum)\r\n            {\r\n                knife.node.scale = ((i % 5 + 1) / 5 * 0.6 + 0.75);\r\n            }else\r\n            {\r\n                //knife.node.scale = 1;\r\n                knife.node.scale = radiusScale;\r\n            }\r\n\r\n            var pos:cc.Vec2 = cc.v2(this.radius * Math.cos(i * angle),this.radius * Math.sin(i * angle));\r\n            knife.setPos(pos);\r\n            knife.setRota(180  - i * eulerAngle);\r\n\r\n        }\r\n     }\r\n}\r\n"]}