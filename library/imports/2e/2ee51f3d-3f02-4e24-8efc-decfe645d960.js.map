{"version":3,"sources":["assets\\script\\tscript\\core\\ResourcesManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ResourcesManager extends cc.Component {\r\n\r\n    private static _instance: ResourcesManager;\r\n    public static get instance(): ResourcesManager {\r\n        if(this._instance == null)\r\n        {\r\n            this._instance = new ResourcesManager();\r\n            this._instance.init();\r\n        }\r\n        return ResourcesManager._instance;\r\n    }\r\n\r\n    private jsonRoot = \"configtable/\";\r\n\r\n    private prefabDic:{[key:string]:cc.Prefab} = {};\r\n\r\n    private init()\r\n    {\r\n        \r\n    }\r\n\r\n\r\n    public loadJson(jsonName:string,callback:Function) {\r\n        cc.loader.loadRes(this.jsonRoot + jsonName,(error,data)=>{\r\n            if(!error)\r\n            {\r\n                callback(data.json,jsonName);\r\n            }else\r\n            {\r\n                cc.log( \"json\" + jsonName + \"加载失败 \",error);\r\n            }\r\n        });\r\n    }\r\n\r\n    public load(prefabName:string,callback:Function,type:typeof cc.Asset = cc.Prefab,isCache:boolean = true,isInstant:boolean = true,root:string = \"prefab/\")\r\n    {\r\n\r\n        if(this.prefabDic[prefabName])\r\n        {\r\n            if(isInstant)\r\n            {\r\n                var node:cc.Node = cc.instantiate(this.prefabDic[prefabName]);\r\n                if(callback)\r\n                {\r\n                    callback(node);\r\n                }\r\n            }else\r\n            {\r\n                if(callback)\r\n                {\r\n                    callback(this.prefabDic[prefabName]);\r\n                }\r\n            }\r\n            \r\n            return;\r\n        }\r\n\r\n        var path:string =  root + prefabName;\r\n        cc.loader.loadRes(path,type,(error,prefab)=>{\r\n\r\n            if(!error)\r\n            {\r\n                if(isCache)\r\n                {\r\n                    this.prefabDic[prefabName] = prefab;\r\n                }\r\n    \r\n                if(isInstant)\r\n                {\r\n                    var node:cc.Node = cc.instantiate(prefab);\r\n    \r\n                    if(callback)\r\n                    {\r\n                        callback(node);\r\n                    }\r\n                }else\r\n                {\r\n                    if(callback)\r\n                    {\r\n                        callback(prefab);\r\n                    }\r\n                }\r\n                \r\n            }else\r\n            {\r\n                cc.log(\"加载资源失败 path\",path,error.toString());\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n}\r\n"]}