{"version":3,"sources":["assets\\script\\tscript\\ui\\main\\LevelMessageUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LevelIcon from \"./LevelIcon\";\r\nimport BaseUI from \"../base/BaseUI\";\r\nimport DataManager from \"../../core/DataManager\";\r\nimport Mathf from \"../../util/Mathf\";\r\nimport LevelConfigData from \"../../configdata/LevelConfigData\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\nexport enum ContentType\r\n{\r\n    none = 0,\r\n    fhl = 1,\r\n    rocket = 2,\r\n    magnet = 3,\r\n    blackHole = 10,\r\n    staticMeteor = 11,\r\n    moveMeteor = 12,\r\n    \r\n    other = 100,\r\n}\r\n\r\n@ccclass\r\nexport default class LevelMessageUI extends BaseUI {\r\n\r\n    @property(cc.Node)\r\n    panel: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    touchPlane: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    title: cc.Node = null;\r\n\r\n    @property(LevelIcon)\r\n    levelIcon: LevelIcon = null;\r\n\r\n    @property(cc.Sprite)\r\n    contentIcon: cc.Sprite = null;\r\n\r\n    @property(cc.Button)\r\n    leftBtn: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    rightBtn: cc.Button = null;\r\n\r\n    @property(cc.Label)\r\n    unlockTxt: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    detailTxt: cc.Label = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    contentImgArr: cc.SpriteFrame[] = [];\r\n\r\n\r\n\r\n    private contentIndex:number = 0;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    \r\n    onLoad () {\r\n        this.basePos = this.node.position;\r\n\r\n        this.scheduleOnce(()=>{\r\n           this.close();\r\n        },0.01)\r\n    }\r\n\r\n    start () {\r\n\r\n        var contentLen = DataManager.instance.ctlevelConfigDatas.length;\r\n\r\n        this.touchPlane.on(cc.Node.EventType.TOUCH_START,(event)=>\r\n        {\r\n            this.close();\r\n        },this);\r\n\r\n        this.leftBtn.node.on(cc.Node.EventType.TOUCH_START,(event)=>\r\n        {\r\n            this.contentIndex = Mathf.clamp(this.contentIndex - 1,0,contentLen - 1);\r\n\r\n            this.showMsg();\r\n\r\n        },this);\r\n\r\n        this.rightBtn.node.on(cc.Node.EventType.TOUCH_START,(event)=>\r\n        {\r\n            this.contentIndex = Mathf.clamp(this.contentIndex + 1,0,contentLen - 1);\r\n            this.showMsg();\r\n\r\n        },this);\r\n\r\n        var level = DataManager.instance.getLevel(DataManager.instance.getPlayerData().star);\r\n        this.contentIndex = level - 1;\r\n\r\n    }\r\n\r\n\r\n    public showMsg()\r\n    {\r\n        var levelcnfdata:LevelConfigData = DataManager.instance.ctlevelConfigDatas[this.contentIndex];\r\n\r\n        this.levelIcon.updateSkin(levelcnfdata.id,false);\r\n        this.unlockTxt.string = `获得${levelcnfdata.stars}星解锁`;\r\n        this.detailTxt.string = levelcnfdata.newContent;\r\n\r\n        if(levelcnfdata.contentType == 100)\r\n        {\r\n            this.title.active = false;\r\n            this.detailTxt.node.x = 110;\r\n            this.detailTxt.node.y = -18;\r\n        }else\r\n        {\r\n            this.title.active = true;\r\n            this.detailTxt.node.x = 158;\r\n            this.detailTxt.node.y = -43;\r\n        }\r\n\r\n        this.contentIcon.spriteFrame = this.contentImgArr[levelcnfdata.contentType]\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    public open()\r\n    {\r\n        super.open();\r\n\r\n        this.touchPlane.active = true;\r\n\r\n        this.panel.stopAllActions();\r\n        this.panel.y = -250;\r\n        this.panel.runAction(cc.moveTo(0.65,0,0).easing(cc.easeCubicActionOut()));\r\n\r\n\r\n\r\n        this.showMsg();\r\n    }\r\n\r\n    public close()\r\n    {\r\n\r\n        this.panel.stopAllActions();\r\n\r\n        this.touchPlane.active = false;\r\n\r\n        //super.close();\r\n\r\n        var seq = cc.sequence(cc.moveTo(0.65,0,-250).easing(cc.easeCubicActionOut()),cc.callFunc(()=>{\r\n            super.close();\r\n\r\n        },this))\r\n\r\n        this.panel.runAction(seq)\r\n\r\n    }\r\n}\r\n"]}