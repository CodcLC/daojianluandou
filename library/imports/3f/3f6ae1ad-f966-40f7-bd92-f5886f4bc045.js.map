{"version":3,"sources":["assets\\script\\tscript\\ui\\UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import View from \"./base/View\";\r\nimport MainUI from \"./main/MainUI\";\r\nimport SuccessPanel from \"./result/SuccessPanel\";\r\nimport MessageUI from \"./message/MessageUI\";\r\nimport RankUI from \"./rank/RankUI\";\r\nimport AccountUI from \"./main/AccountUI\";\r\nimport MatchingUI from \"./main/MatchingUI\";\r\nimport WXSdk from \"../wx/WXSdk\";\r\nimport WXOpenDataUI from \"./main/WXOpenDataUI\";\r\nimport UpgradeUI from \"./main/UpgradeUI\";\r\nimport LevelMessageUI from \"./main/LevelMessageUI\";\r\nimport TryOutUI from \"./main/TryOutUI\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**\r\n * 摊开管理类\r\n */\r\n@ccclass\r\nexport default class UIManager extends cc.Component {\r\n\r\n    private static _instance: UIManager;\r\n    \r\n    public static get instance(): UIManager {\r\n        /*if(this._instance == null)\r\n        {\r\n            this._instance = new UIManager();\r\n            this._instance.init();\r\n        }*/\r\n        return UIManager._instance;\r\n    }\r\n    \r\n\r\n    @property(cc.Node)\r\n    private viewLayers:Array<cc.Node> = [];\r\n\r\n    private viewDic:{[key:string]:View} = {};\r\n\r\n    @property(MainUI)\r\n    public mainUI:MainUI = null;\r\n\r\n    @property(SuccessPanel)\r\n    public resultUI:SuccessPanel = null;\r\n\r\n    @property(MessageUI)\r\n    public messageUI:MessageUI = null;\r\n\r\n    @property(RankUI)\r\n    public rankUI:RankUI = null;\r\n\r\n    @property(AccountUI)\r\n    public accountUI:AccountUI = null;\r\n\r\n    @property(MatchingUI)\r\n    public matchingUI:MatchingUI = null;\r\n\r\n    @property(WXOpenDataUI)\r\n    public wxOpenDataUI:WXOpenDataUI = null;\r\n\r\n    @property(UpgradeUI)\r\n    public upgradeUI:UpgradeUI = null;\r\n\r\n    @property(LevelMessageUI)\r\n    public levelMessageUI:LevelMessageUI = null;\r\n\r\n    @property(TryOutUI)\r\n    public tryOutUI:TryOutUI = null;\r\n\r\n    private tex:cc.Texture2D = new cc.Texture2D();\r\n\r\n    private showOpenData:boolean = false;\r\n\r\n    \r\n\r\n\r\n    onLoad()\r\n    {\r\n        UIManager._instance = this;\r\n        UIManager._instance.init();\r\n    }\r\n\r\n    private init()\r\n    {\r\n    }\r\n\r\n    start()\r\n    {\r\n\r\n    }\r\n\r\n    /*update(dt)\r\n    {\r\n  \r\n    }*/\r\n\r\n\r\n\r\n    /**\r\n     * 打开一个界面\r\n     * @param viewName \r\n     * @param callback \r\n     * @param layerType \r\n     * @param root \r\n     */\r\n    public OpenView(viewName:string,callback:Function = null,layerType:LayerType = LayerType.popup,root:string = \"prefab/view/\")\r\n    {\r\n        var path = root + viewName;\r\n\r\n        if(this.viewDic[viewName])\r\n        {\r\n\r\n            var view:View = this.viewDic[viewName];\r\n            view.node.setParent(null);\r\n            this.viewLayers[layerType].addChild(view.node);\r\n            view.node.position = cc.Vec2.ZERO;\r\n            view.open();\r\n\r\n            if(callback)\r\n            {\r\n                callback.apply(this,[this.viewDic[viewName]]);\r\n            }\r\n            return;\r\n        }\r\n\r\n        cc.loader.loadRes(path,cc.Prefab,(err,prefab)=>{\r\n\r\n            if(!err)\r\n            {\r\n                var node:cc.Node = cc.instantiate(prefab);\r\n                var view:View = node.getComponent(View);\r\n                //view.node.setParent(this.viewLayers[layerType]);\r\n                view.node.setParent(null);\r\n                this.viewLayers[layerType].addChild(view.node);\r\n                view.node.position = cc.Vec2.ZERO;\r\n                view.open();\r\n                cc.log(\"加载到的资源\",prefab,view.name);\r\n                this.viewDic[viewName] = view;\r\n                if(callback != null)\r\n                {\r\n                    callback.apply(this,[view]);\r\n                }\r\n                \r\n            }else\r\n            {\r\n                cc.log(\"路径\" + path + \"找不到资源\");\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 关闭一个界面\r\n     * @param viewName \r\n     * @param isDele \r\n     */\r\n    public closeView(viewName:string,isDele:boolean = true)\r\n    {\r\n        if(this.viewDic[viewName])\r\n        {\r\n            this.viewDic[viewName].close();\r\n            this.viewDic[viewName].node.setParent(null);\r\n            if(isDele)\r\n            {\r\n                this.viewDic[viewName].destroySelf();\r\n                this.viewDic[viewName] = null;\r\n                delete this.viewDic[viewName];\r\n            }\r\n        }\r\n    }\r\n\r\n    public getLayer(layerType:LayerType):cc.Node\r\n    {\r\n        return this.viewLayers[layerType];\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class ViewName\r\n{\r\n    public static SuccessPanel = \"SuccessPanel\";\r\n    public static FailPanel = \"FailPanel\";\r\n    public static EmployeesView = \"EmployeesView\";\r\n    public static EmployeesRecuitView = \"EmployeesRecuitView\";\r\n    public static RankView = \"RankView\";\r\n    public static GiftView = \"GiftView\";\r\n    public static DGView = \"DGView\";\r\n    public static IVView = \"IVView\";\r\n    public static FarmLevelView = \"FarmLevelView\";\r\n    public static BonusEffectView = \"BonusEffectView\";\r\n    public static EmployeeUpView = \"EmployeeUpView\";\r\n    public static OfflineView = \"OfflineView\";\r\n    public static FarmAreaUpView = \"FarmAreaUpView\";\r\n    public static SpeedUpView = \"SpeedUpView\";\r\n    public static RewardEconomicView = \"RewardEconomicView\";\r\n    \r\n}\r\n\r\nexport enum LayerType\r\n{\r\n    back = 0,\r\n    popup,\r\n}\r\n\r\n\r\n"]}