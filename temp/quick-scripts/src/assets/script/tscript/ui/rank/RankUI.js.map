{"version":3,"sources":["assets\\script\\tscript\\ui\\rank\\RankUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import RankItem from \"./RankItem\";\r\nimport GameScene from \"../../gamescene/GameScene\";\r\nimport GameManager, { GameStatus } from \"../../core/GameManager\";\r\nimport Player, { PlayerStatus } from \"../../gamescene/Player\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class RankUI extends cc.Component {\r\n\r\n    @property(RankItem)\r\n    rankItemArr: RankItem[] = [];\r\n\r\n    //@property(cc.Prefab)\r\n    //public knifePrefab:cc.Prefab = null;\r\n\r\n\r\n    private gameScene:GameScene = null;\r\n\r\n\r\n    private playerColor:cc.Color = new cc.Color(200,141,51);\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        this.gameScene = GameManager.instance.gameScene.getComponent(GameScene);\r\n\r\n    }\r\n\r\n    start () {\r\n\r\n\r\n        this.gameScene.node.on(\"knifesChange\",this.onKnifesChange,this);\r\n\r\n    }\r\n\r\n    private onKnifesChange()\r\n    {\r\n        if(GameManager.instance.gameStatus == GameStatus.over)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.gameScene.playerArr.sort((player1:Player,player2:Player):number=>\r\n        {\r\n            var kfLen1:number = player1.knifePool.knifes.length;\r\n            var kfLen2:number = player2.knifePool.knifes.length;\r\n\r\n            if(kfLen1 > kfLen2)\r\n            {\r\n                return -1;\r\n            }\r\n            \r\n            if(kfLen1 < kfLen2)\r\n            {\r\n                return 1;\r\n            }\r\n\r\n            return  0;\r\n        });\r\n\r\n        for(var i = 0 ; i < this.rankItemArr.length ; i++)\r\n        {\r\n            var player:Player = this.gameScene.playerArr[i];\r\n            \r\n            if(player != null)\r\n            {\r\n                this.rankItemArr[i].mark.spriteFrame = player.body.skin.spriteFrame;\r\n                this.rankItemArr[i].nameTxt.string = player.getName();\r\n\r\n                if(player.status != PlayerStatus.die)\r\n                {\r\n                    this.rankItemArr[i].rankTxt.string = \"\" + player.knifePool.knifes.length;\r\n                }else\r\n                {\r\n                    this.rankItemArr[i].rankTxt.string = \"0\";\r\n                }\r\n\r\n                if(player == this.gameScene.player)\r\n                {\r\n                    this.rankItemArr[i].nameTxt.node.color = this.playerColor;\r\n                }else\r\n                {\r\n                    this.rankItemArr[i].nameTxt.node.color = cc.Color.WHITE;\r\n                }\r\n                \r\n            }\r\n            \r\n        }\r\n\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}