{"version":3,"sources":["assets\\script\\tscript\\gamescene\\Body.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Player, { PlayerStatus } from \"./Player\";\r\nimport Knife, { KnifeStatus } from \"./Knife\";\r\nimport Item, { ItemType } from \"../item/Item\";\r\nimport Random from \"../util/Random\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Body extends cc.Component {\r\n\r\n    \r\n    @property(cc.Sprite)\r\n    public skin:cc.Sprite  = null;\r\n\r\n    @property(cc.Sprite)\r\n    public face:cc.Sprite  = null;\r\n\r\n    @property(Player)\r\n    public player:Player = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    public faceSFArr:cc.SpriteFrame[] = [];\r\n\r\n    private timer:number = 0;\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.player = this.node.parent.getComponent(Player);\r\n        //this.face.node.active = false;\r\n        //this.face.node.active = this.player.showface;\r\n    }\r\n\r\n    update (dt) \r\n    {\r\n        if(this.player.showface)\r\n        {\r\n            if(this.timer > 0)\r\n            {\r\n                this.timer -= dt;\r\n\r\n                if(this.timer <= 0)\r\n                {\r\n                    //this.face.spriteFrame = this.faceSFArr[Random.RangeInteger(0,this.faceSFArr.length)];\r\n                    //this.timer = Random.Range(1.5,2.5);\r\n                    this.face.spriteFrame = this.faceSFArr[1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public onCollisionEnter(other:cc.Collider,self:cc.Collider)\r\n    {\r\n        if(this.player.status == PlayerStatus.die)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        if(other.tag == 0)\r\n        {\r\n        }else if(other.tag == 1)\r\n        {\r\n            var knife:Knife = other.getComponent(Knife);\r\n\r\n            if(knife && knife.status == KnifeStatus.capture && knife.player && knife.player != this.player)\r\n            {\r\n                this.player.setDamage(knife.damage,knife.player);\r\n\r\n                /*var pos1 = knife.node.parent.convertToWorldSpaceAR(knife.node.position);\r\n                var pos2 = this.node.parent.convertToWorldSpaceAR(this.node.position);\r\n\r\n                var dir:cc.Vec2 = pos1.sub(pos2).normalize();\r\n                knife.fly(dir);*/\r\n            }\r\n            \r\n        }else if(other.tag == 8)\r\n        {\r\n            /*var item:Item = other.getComponent(Item);\r\n            switch(item.type)\r\n            {\r\n                case ItemType.fhl:\r\n                this.player.fhlItemEffect();\r\n                break;\r\n                case ItemType.rocket:\r\n\r\n                this.player.rocketItemEffect();\r\n                \r\n                break;\r\n                case ItemType.magnet:\r\n\r\n                this.player.magnetItemEffect();\r\n                \r\n                break;\r\n            }\r\n\r\n            item.destroySelf();*/\r\n\r\n        }else\r\n        {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public updateState()\r\n    {\r\n        if(!this.player)\r\n        {\r\n            this.player = this.node.parent.getComponent(Player);\r\n        }\r\n\r\n        this.face.node.active = this.player.showface;\r\n    }\r\n\r\n    public changeFace(index:number,timer:number = 0)\r\n    {\r\n        this.timer = timer;\r\n        this.face.spriteFrame = this.faceSFArr[index];\r\n    }\r\n\r\n}\r\n"]}