{"version":3,"sources":["assets\\script\\tscript\\gamescene\\CameraFollow.ts"],"names":[],"mappings":";;;;;AAAA,mCAAgD;AAChD,mDAA8C;AAC9C,yCAAoC;AACpC,2CAAsC;AACtC,uCAAkC;AAElC,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAA0C,gCAAY;IADtD;QAAA,qEAgEC;QA3DU,YAAM,GAAa,IAAI,CAAC;QAIxB,YAAM,GAAU,IAAI,CAAC;QAIpB,WAAK,GAAS,IAAI,CAAC;;IAmD/B,CAAC;qBA/DoB,YAAY;IAc7B,wBAAwB;IAExB,6BAAM,GAAN;QACI,cAAY,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC7B,+CAA+C;IACnD,CAAC;IAED,4BAAK,GAAL;QACI,IAAI,CAAC,MAAM,GAAG,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC,MAAM,CAAC;IAChF,CAAC;IAEA,6BAAM,GAAN,UAAQ,EAAE;QAEN,qBAAqB;QAGtB,IAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,qBAAY,CAAC,GAAG,EACxD;YACI,IAAI,GAAG,GAAY,iBAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAC,EAAE,GAAG,IAAI,CAAC,CAAC;YAE/F,kCAAkC;YAElC;;;;;;;;;;;;;;eAcG;YAEH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YAEhC,2DAA2D;SAC9D;IACJ,CAAC;IAGM,4BAAK,GAAZ,UAAa,IAAe;QAAf,qBAAA,EAAA,QAAe;QAExB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;;IAxDY,qBAAQ,GAAgB,IAAI,CAAC;IAF3C;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACW;IAQ/B;QADC,QAAQ,CAAC,eAAK,CAAC;+CACW;IAZV,YAAY;QADhC,OAAO;OACa,YAAY,CA+DhC;IAAD,mBAAC;CA/DD,AA+DC,CA/DyC,EAAE,CAAC,SAAS,GA+DrD;kBA/DoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import Player, { PlayerStatus } from \"./Player\";\r\nimport GameManager from \"../core/GameManager\";\r\nimport GameScene from \"./GameScene\";\r\nimport Vector2 from \"../util/Vector2\";\r\nimport Quake from \"../util/Quake\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CameraFollow extends cc.Component {\r\n\r\n\r\n    @property(cc.Camera)\r\n    public camera:cc.Camera = null;\r\n\r\n    public static instance:CameraFollow = null;\r\n\r\n    public player:Player = null;\r\n\r\n\r\n    @property(Quake)\r\n    private quake:Quake = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        CameraFollow.instance = this;\r\n        //this.quake = this.camera.getComponent(Quake);\r\n    }\r\n\r\n    start () {\r\n        this.player = GameManager.instance.gameScene.getComponent(GameScene).player;\r\n    }\r\n\r\n     update (dt) \r\n     {\r\n         /**********摄像机平滑跟随 */\r\n\r\n\r\n        if(this.player && this.player.status != PlayerStatus.die)\r\n        {\r\n            var pos:cc.Vec2 =  Vector2.lerp(this.camera.node.position,this.player.node.position,dt * 25.0);\r\n\r\n            //pos = this.player.node.position;\r\n\r\n            /*if(pos.x < -this.halfSize.width)\r\n            {\r\n                pos.x = -this.halfSize.width;\r\n            }else if(pos.x > this.halfSize.width)\r\n            {\r\n                pos.x = this.halfSize.width;\r\n            }\r\n\r\n            if(pos.y < -this.halfSize.height)\r\n            {\r\n                pos.y = -this.halfSize.height;\r\n            }else if(pos.y > this.halfSize.height)\r\n            {\r\n                pos.y = this.halfSize.height;\r\n            }*/\r\n\r\n            this.camera.node.position = pos;\r\n\r\n            //cc.Camera.main.node.position = this.player.node.position;\r\n        }\r\n     }\r\n\r\n\r\n     public shake(time:number = 0)\r\n     {\r\n         this.quake.shake(time);\r\n     }\r\n}\r\n"]}