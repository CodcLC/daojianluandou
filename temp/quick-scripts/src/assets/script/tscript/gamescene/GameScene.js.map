{"version":3,"sources":["assets\\script\\tscript\\gamescene\\GameScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Player, { PlayerStatus } from \"./Player\";\r\nimport Vector2 from \"../util/Vector2\";\r\nimport UIManager, { ViewName, LayerType } from \"../ui/UIManager\";\r\nimport CustomEventType from \"../event/CustomEventType\";\r\nimport ResourcesManager from \"../core/ResourcesManager\";;\r\nimport GameManager, { GameStatus } from \"../core/GameManager\";\r\nimport Knife, { KnifeType } from \"./Knife\";\r\nimport Random from \"../util/Random\";\r\nimport Clock from \"../util/Clock\";\r\nimport DataManager from \"../core/DataManager\";\r\nimport WXSdk from \"../wx/WXSdk\";\r\nimport Wall from \"./Wall\";\r\nimport MovieClip from \"../util/MovieClip\";\r\nimport BlackHole from \"./BlackHole\";\r\nimport Item, { ItemType } from \"../item/Item\";\r\nimport LevelConfigData from \"../configdata/LevelConfigData\";\r\nimport PlayerAI, { PlayerAILevel } from \"./PlayerAI\";\r\nimport CameraFollow from \"./CameraFollow\";\r\nimport SoundManager from \"../core/SoundManager\";\r\nimport { SoundClipType } from \"../audio/SoundClip\";\r\nimport { BgSoundClipType } from \"../audio/BgSoundClip\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameScene extends cc.Component {\r\n\r\n    public static levelMax:number = 1;\r\n\r\n    public static levelMin:number = 1;\r\n\r\n    @property(cc.Node)\r\n    public sceneSize: cc.Node = null;\r\n\r\n    @property(Player)\r\n    public player:Player = null;\r\n\r\n    @property(Clock)\r\n    public clock:Clock = null;\r\n\r\n    @property(cc.Label)\r\n    public cdTxt:cc.Label = null;\r\n\r\n    @property(Wall)\r\n    public wall:Wall = null;\r\n\r\n    @property(cc.Sprite)\r\n    public bg:cc.Sprite = null;\r\n\r\n    private halfSize:cc.Size = cc.Size.ZERO;\r\n\r\n    private knifeNum:number = 25;\r\n\r\n    public knifeArr:Array<Knife> = [];\r\n\r\n    public playerArr:Array<Player> = [];\r\n\r\n    private rank:number = 8;\r\n\r\n    private skinIndexArr:number[] = [];\r\n\r\n    private nameIndexArr:number[] = [];\r\n\r\n    private aiPlayerCount:number = 7;\r\n\r\n    public aiNameIndexArr:number[] = [];\r\n\r\n\r\n    private levelConfigData:LevelConfigData = null;\r\n\r\n    public blackHole:BlackHole = null;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n\r\n        cc.director.getCollisionManager().enabled = true;\r\n\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        //cc.director.getPhysicsManager().debugDrawFlags = 1;\r\n        cc.director.getPhysicsManager().gravity = cc.Vec2.ZERO;\r\n\r\n        //this.node\r\n        //this.player = this.getComponentInChildren(Player);\r\n        //this.player.gameScene = this;\r\n\r\n        this.halfSize.width = (this.sceneSize.width - cc.winSize.width) / 2 ;\r\n        this.halfSize.height = (this.sceneSize.height - cc.winSize.height) / 2 ;\r\n\r\n        this.player.initKnife(3); //初始化3把刀\r\n        this.player.showface = DataManager.instance.getPlayerData().todayUseFace;\r\n\r\n    }\r\n\r\n    start () {\r\n\r\n        SoundManager.instance.PlayBGSound(BgSoundClipType.main);\r\n\r\n        this.clock.node.active = false;\r\n        this.cdTxt.node.active = false;\r\n        \r\n        this.playerArr.push(this.player);\r\n\r\n        this.player.skin = 1;\r\n        \r\n\r\n        if(WXSdk.instance.isWXPlatform())\r\n        {\r\n            if(WXSdk.instance.isLogin)\r\n            {\r\n               this.onWxLogin();\r\n            }else\r\n            {\r\n                this.player.setName(\"\");\r\n                cc.systemEvent.on(\"wxLogin\",this.onWxLogin,this);\r\n            }\r\n            \r\n\r\n        }else\r\n        {\r\n\t\t\t\r\n\t\t\tvar nn =  cc.sys.localStorage.getItem(\"playname\");\r\n\t\t\t\r\n\t\t\tif( nn== \"\" || nn==null || nn== undefined  )\r\n\t\t\t{\r\n\t\t\t\tnn = \"小李飞刀\";\r\n\t\t\t\tcc.sys.localStorage.setItem(\"playname\",nn);\r\n\t\t\t}\r\n\t\t\t\r\n            this.player.setName(nn);\r\n        }\r\n\r\n\r\n        for(var i = 0; i < this.aiPlayerCount ; i++)\r\n        {\r\n            this.aiNameIndexArr.push(this.getRandomNameIndex());\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private onWxLogin()\r\n    {\r\n        this.player.setName(WXSdk.instance.nickname);\r\n    }\r\n\r\n    public startGame()\r\n    {\r\n        GameManager.instance.gameStatus = GameStatus.start;\r\n        GameManager.gameTimes ++;\r\n\r\n        DataManager.instance.getPlayerData().games++;\r\n        DataManager.instance.savePlayerData();\r\n        \r\n\r\n        var star:number = DataManager.instance.getPlayerData().star;\r\n\r\n        var levelId = DataManager.instance.getLevelId(star);\r\n\r\n        this.levelConfigData = DataManager.instance.levelConfigDatas[levelId - 1];\r\n\r\n        //cc.log(\"levelConfigData\",this.levelConfigData);\r\n\r\n        var leveCnfdatas = DataManager.instance.levelConfigDatas;\r\n\r\n        if(levelId <= 5)\r\n        {\r\n            //当玩家还处于第一阶段时 显示导航\r\n            GameManager.instance.guide.node.active = true;\r\n        }else\r\n        {\r\n            GameManager.instance.guide.node.active = false;\r\n        }\r\n\r\n\r\n        this.initBarriers();\r\n        this.initAIPlayer(this.aiPlayerCount);\r\n        this.initKnifes(this.knifeNum);\r\n        this.initMark();\r\n\r\n        this.player.onGameStart();\r\n\r\n        //var cdTxt:cc.Label = this.clock.getComponent(cc.Label);\r\n\r\n        this.clock.node.active = true;\r\n        this.clock.hms = 2;\r\n        this.clock.timeLength = 2 * 60 + 31;\r\n\r\n        var timeTxt = this.clock.getComponentInChildren(cc.Label);\r\n        timeTxt.string = \"\" + this.clock.timeLength;\r\n\r\n        this.clock.Play((s,m,h,str,t)=>\r\n        {\r\n            if(t == 100 || t == 70 || t == 40)\r\n            {\r\n                this.wall.shrink();\r\n            }\r\n\r\n            if(this.clock.currentCount % 25 == 0)\r\n            {\r\n\r\n                var otherKfCount = 0;\r\n\r\n                if(this.blackHole)\r\n                {\r\n                    otherKfCount = Math.ceil(this.blackHole.knifecount / 2);\r\n                    this.blackHole.knifecount = 0;\r\n                }\r\n\r\n                this.initKnifes(5 + otherKfCount);\r\n            }\r\n\r\n            if(this.levelConfigData.hotWheels != \"\")\r\n            {\r\n                var arr = this.levelConfigData.hotWheels.split(\"-\");\r\n\r\n                if(t % Number(arr[0]) == 0)\r\n                {\r\n                    this.initItem(Number(arr[1]),ItemType.fhl)\r\n                }\r\n            }\r\n\r\n            if(this.levelConfigData.speedUp != \"\")\r\n            {\r\n                var arr = this.levelConfigData.speedUp.split(\"-\");\r\n\r\n                if(t % Number(arr[0]) == 0)\r\n                {\r\n                    this.initItem(Number(arr[1]),ItemType.rocket)\r\n                }\r\n            }\r\n\r\n            if(this.levelConfigData.magnet != \"\")\r\n            {\r\n                var arr = this.levelConfigData.magnet.split(\"-\");\r\n\r\n                if(t % Number(arr[0]) == 0)\r\n                {\r\n                    this.initItem(Number(arr[1]),ItemType.magnet)\r\n                }\r\n            }\r\n\r\n            if(t == 120)\r\n            {\r\n\r\n                if(this.levelConfigData.blackHole != 0)\r\n                {\r\n                    var rangeWidth = this.sceneSize.width/2 - 350;\r\n                    var rangeHeight = this.sceneSize.height/2 - 350;\r\n\r\n                    this.blackHole = GameManager.instance.getBlackHole();\r\n                    this.blackHole.node.parent = this.node;\r\n                    this.blackHole.node.position = cc.v2(Random.Range(-rangeWidth,rangeWidth),Random.Range(-rangeHeight,rangeHeight));\r\n                }\r\n                \r\n            }\r\n\r\n            timeTxt.string = `${t}`;\r\n\r\n            if(t <= 5)\r\n            {\r\n                this.cdTxt.node.active = true;\r\n                this.cdTxt.string = \"\" + t;\r\n                SoundManager.instance.playAudioClip(SoundClipType.dida);\r\n            }\r\n\r\n            if(t == 0)\r\n            {\r\n                this.cdTxt.node.active = false;\r\n            }\r\n\r\n\r\n        },\r\n        ()=>{\r\n            \r\n            this.clock.Stop();\r\n\r\n            var arr:Array<Player> = [];\r\n\r\n            for(var i = 0 ; i < this.playerArr.length ; i++)\r\n            {\r\n                if(this.playerArr[i].status != PlayerStatus.die && this.playerArr[i].rank == 1)\r\n                {\r\n                    arr.push(this.playerArr[i]);\r\n                }\r\n            }\r\n\r\n            arr.sort((player1:Player,player2:Player):number=>\r\n            {\r\n\r\n                if(player1.killCount > player2.killCount)\r\n                {\r\n                    return -1;\r\n                }else if(player1.killCount < player2.killCount)\r\n                {\r\n                    return 1;\r\n                }else\r\n                {\r\n                    var len1:number = player1.knifePool.knifes.length;\r\n                    var len2:number = player2.knifePool.knifes.length;\r\n\r\n                    if(len1 > len2)\r\n                    {\r\n                        return -1;\r\n                    }\r\n                    \r\n                    if(len1 < len2)\r\n                    {\r\n                        return 1;\r\n                    }\r\n                }\r\n\r\n                return  0;\r\n            });\r\n\r\n            for(var i = 0 ; i < arr.length ; i++)\r\n            {\r\n                arr[i].rank = i + 1;\r\n            }\r\n\r\n            this.gameOver()\r\n        });\r\n\r\n        UIManager.instance.rankUI.node.active = true;\r\n    }\r\n\r\n    public gameOver()\r\n    {\r\n        GameManager.instance.gameStatus = GameStatus.over;\r\n\t\tconsole.log(\"game over\");\r\n        this.scheduleOnce(()=>{\r\n\r\n            //GameManager.instance.gameStatus = GameStatus.over;\r\n\r\n            UIManager.instance.rankUI.node.active = false;\r\n            UIManager.instance.accountUI.open();\r\n        },1.8);\r\n    }\r\n\r\n    public initBarriers()\r\n    {\r\n\r\n        var rangeWidth = this.sceneSize.width/2 - 350;\r\n        var rangeHeight = this.sceneSize.height/2 - 350;\r\n\r\n        if(this.levelConfigData.meteor != \"\")\r\n        {\r\n            var arr = this.levelConfigData.meteor.split(\"-\");\r\n            var count:number = Random.RangeInteger(Number(arr[0]),Number(arr[0]));\r\n\r\n            for(var i = 0 ; i < count ; i++)\r\n            {\r\n                var barrier:cc.Node = GameManager.instance.getRandomBarrier(0);\r\n                barrier.parent = this.node;\r\n                barrier.position = cc.v2(Random.Range(-rangeWidth,rangeWidth),Random.Range(-rangeHeight,rangeHeight));\r\n            }\r\n        }\r\n\r\n        if(this.levelConfigData.movMeteor != \"\")\r\n        {\r\n            var arr = this.levelConfigData.movMeteor.split(\"-\");\r\n            var count:number = Random.RangeInteger(Number(arr[0]),Number(arr[0]));\r\n\r\n            for(var i = 0 ; i < count ; i++)\r\n            {\r\n                var barrier:cc.Node = GameManager.instance.getRandomBarrier(1);\r\n                barrier.parent = this.node;\r\n                barrier.position = cc.v2(Random.Range(-rangeWidth,rangeWidth),Random.Range(-rangeHeight,rangeHeight));\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    public initItem(count:number,itemType:ItemType = ItemType.none)\r\n    {\r\n        var width:number = this.sceneSize.width / 2 - 150;\r\n        var height:number = this.sceneSize.height / 2 - 150;\r\n\r\n        for(var i = 0; i < count ; i++)\r\n        {\r\n            var item:Item = null;\r\n            \r\n            if(itemType == ItemType.none)\r\n            {\r\n                item = GameManager.instance.getItemByType(Random.RangeInteger(1,4))\r\n            }else\r\n            {\r\n                item = GameManager.instance.getItemByType(itemType)\r\n            }\r\n            \r\n            item.node.parent = this.node;\r\n            item.node.position = cc.v2(Random.Range(-width,width),Random.Range(-height,height));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param count 初始化AI玩家\r\n     */\r\n    public initAIPlayer(count:number)\r\n    {\r\n\r\n        var aiLvArr:PlayerAILevel[] = [];\r\n\r\n        for(var i = 1 ; i <= 4 ; i++)\r\n        {\r\n            for(var j = 0 ; j < this.levelConfigData[`ailv${i}`]; j++)\r\n            {\r\n                aiLvArr.push(i);\r\n            }\r\n        }\r\n\r\n        for(var i = 0; i < count ; i++)\r\n        {\r\n            var player = GameManager.instance.getPlayer();\r\n            player.node.parent = this.node;\r\n            player.isAI = true;\r\n            player.showface = Random.Range(0,10) < 3 ? true : false;\r\n            player.getComponent(PlayerAI).aiLevel = !aiLvArr[i] ? PlayerAILevel.level1 : aiLvArr[i];\r\n            player.onGameStart();\r\n            player.randomKnifeSkin();\r\n            player.getComponent(PlayerAI).onGameStart();\r\n\r\n            var index = Random.RangeInteger(0,this.getSkinIndexArr().length);\r\n            var skinIndex = this.getSkinIndexArr()[index];\r\n            this.getSkinIndexArr().splice(index,1);\r\n            \r\n            player.skin = skinIndex;\r\n            player.setName(DataManager.instance.nameConfigDatas[this.aiNameIndexArr[i]].name);\r\n\r\n            this.playerArr.push(player);\r\n\r\n            var width:number = this.sceneSize.width / 2 - 150;\r\n            var height:number = this.sceneSize.height / 2 - 150;\r\n            player.node.position = cc.v2(Random.Range(-width,width),Random.Range(-height,height));\r\n\r\n        }\r\n    }\r\n\r\n    private getSkinIndexArr()\r\n    {\r\n        if(this.skinIndexArr.length == 0)\r\n        {\r\n            for(var i = 1 ; i <= 8; i++)\r\n            {\r\n                this.skinIndexArr.push(i)\r\n            }\r\n\r\n            var index:number = this.skinIndexArr.indexOf(this.player.skin);\r\n            if(index != -1)\r\n            {\r\n                this.skinIndexArr.splice(index,1);\r\n            }\r\n        }\r\n\r\n        return this.skinIndexArr;\r\n    }\r\n\r\n    public getRandomNameIndex():number\r\n    {\r\n        var index:number = Random.RangeInteger(0,this.getNameIndexArr().length);\r\n        var nameIndex:number = this.getNameIndexArr()[index];\r\n        this.getNameIndexArr().splice(index,1);\r\n        //return DataManager.instance.nameConfigDatas[nameIndex].name;\r\n        return nameIndex;\r\n    }\r\n\r\n    public getNameIndexArr()\r\n    {\r\n        if(this.nameIndexArr.length == 0)\r\n        {\r\n            var nameArr = DataManager.instance.nameConfigDatas;\r\n            var len:number = 50;\r\n\r\n            for(var i = 0 ; i < len; i++)\r\n            {\r\n                this.nameIndexArr.push(i)\r\n            }\r\n        }\r\n\r\n        return this.nameIndexArr;\r\n    }\r\n\r\n\r\n    /**\r\n     * 有玩家被击杀时\r\n     * @param killer 击杀人\r\n     * @param dieMan 被击杀对象\r\n     */\r\n    public playerKilled(killer:Player,dieMan:Player)\r\n    {\r\n\r\n        //cc.log(killer.getName(),\"击杀了\",dieMan.getName());\r\n\r\n        killer.killCount ++;\r\n\r\n        dieMan.rank = this.rank;\r\n        this.rank--;\r\n\r\n        var killEffect:MovieClip = GameManager.instance.getKillEffect();\r\n        killEffect.node.color = dieMan.body.node.color;\r\n        killEffect.node.parent = this.node;\r\n        killEffect.node.position = dieMan.node.position;\r\n\r\n        killer.changeFace(2,1.5);\r\n\r\n        if(killer == this.player)\r\n        {\r\n            DataManager.instance.getPlayerData().kills ++;\r\n            \r\n            if(this.player.killCount == 4)\r\n            {\r\n                DataManager.instance.getPlayerData().kills4 ++;\r\n            }else if(this.player.killCount == 5)\r\n            {\r\n                DataManager.instance.getPlayerData().kills5 ++;\r\n            }else if(this.player.killCount == 6)\r\n            {\r\n                DataManager.instance.getPlayerData().kills6 ++;\r\n            }\r\n\r\n            DataManager.instance.savePlayerData();\r\n\r\n        }\r\n\r\n        //if(!killer.isAI)\r\n        //{\r\n            UIManager.instance.messageUI.showMessage(killer,dieMan);\r\n        //}\r\n        \r\n\r\n        if(!dieMan.isAI)\r\n        {\r\n\r\n            WXSdk.instance.vibrateLong();//玩家自己死亡，长震动\r\n            CameraFollow.instance.shake(1);\r\n\r\n            this.clock.Stop();\r\n            \r\n            this.gameOver()\r\n        }else\r\n        {\r\n\r\n            if(!killer.isAI)\r\n            {\r\n                WXSdk.instance.vibrateShort();//别的玩家自己死亡\r\n                CameraFollow.instance.shake(1);\r\n                SoundManager.instance.playAudioClip(SoundClipType.killMam);\r\n            }\r\n            \r\n\r\n            var playerArr:Player[] = this.getComponentsInChildren(Player);\r\n\r\n            var isEnd = true;\r\n\r\n            for(var i = 0 ; i < playerArr.length ; i++)\r\n            {\r\n\r\n                if(!playerArr[i].node.active)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n                if(playerArr[i].isAI && playerArr[i].status != PlayerStatus.die)\r\n                {\r\n                    isEnd = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if(isEnd)\r\n            {\r\n                this.clock.Stop();\r\n                this.gameOver()\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public initKnifes(count:number)\r\n    {\r\n\r\n        for(var i = 0 ; i < count ; i++)\r\n        {\r\n\r\n            var knife:Knife = GameManager.instance.getKnife(KnifeType.normal);\r\n\r\n            var width:number = this.sceneSize.width / 2 - 150;\r\n            var height:number = this.sceneSize.height / 2 - 150;\r\n            knife.node.rotation = Random.Range(0,360);\r\n            knife.node.position = cc.v2(Random.Range(-width,width),Random.Range(-height,height));\r\n\r\n            this.addKnife(knife);\r\n        }\r\n\r\n    }\r\n\r\n    public initMark()\r\n    {\r\n\r\n        var playerArr:Array<Player> = this.getComponentsInChildren(Player);\r\n\r\n        for(var i = 0 ; i < playerArr.length ; i++)\r\n        {\r\n            var player:Player = playerArr[i];\r\n            if(player.isAI && player.node.active)\r\n            {\r\n                var mark = GameManager.instance.getMark();\r\n                //mark.node.parent = cc.Camera.main.node;\r\n                mark.node.parent = UIManager.instance.getLayer(LayerType.back);\r\n                mark.player = this.player;\r\n                mark.targetPlayer = player;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public addKnife(knife:Knife)\r\n    {\r\n        if(knife.node.parent)\r\n        {\r\n            knife.node.parent.removeChild(knife.node);\r\n        }\r\n        \r\n        this.node.addChild(knife.node,0);\r\n        if(this.knifeArr.indexOf(knife) == -1)\r\n        {\r\n            this.knifeArr.push(knife);\r\n        }\r\n\r\n        this.node.emit(\"knifesChange\",{});\r\n    }\r\n\r\n    public removeKnife(knife:Knife)\r\n    {\r\n        var index:number = this.knifeArr.indexOf(knife);\r\n\r\n        if(index != -1)\r\n        {\r\n            this.knifeArr.splice(index,1);\r\n        }\r\n\r\n        this.node.emit(\"knifesChange\",{});\r\n\r\n    }\r\n\r\n\r\n    /*update (dt) \r\n    {\r\n        \r\n    }*/\r\n\r\n    onDestroy()\r\n    { \r\n        cc.systemEvent.off(\"wxLogin\",this.onWxLogin,this);   \r\n    }\r\n}\r\n"]}