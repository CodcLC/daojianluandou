{"version":3,"sources":["assets\\script\\tscript\\gamescene\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport CustomEventType from \"../event/CustomEventType\";\r\nimport Item, { ItemType } from \"../item/Item\";\r\nimport GameManager, { GameStatus } from \"../core/GameManager\";\r\nimport CommonUils from \"../util/CommonUils\";\r\nimport GameScene from \"./GameScene\";\r\nimport KnifePool from \"./KnifePool\";\r\nimport Knife, { KnifeType, KnifeStatus } from \"./Knife\";\r\nimport Body from \"./Body\";\r\nimport Random from \"../util/Random\";\r\nimport UIManager from \"../ui/UIManager\";\r\nimport DataManager from \"../core/DataManager\";\r\nimport Mathf from \"../util/Mathf\";\r\nimport SoundManager from \"../core/SoundManager\";\r\nimport { SoundClipType } from \"../audio/SoundClip\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n\r\nexport enum PlayerStatus\r\n{\r\n    none = 0,\r\n    defence = 1,\r\n    attack = 2,\r\n    die = 3,\r\n}\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n\r\n    public static colorArr:Array<cc.Color> = [\r\n        new cc.Color(255,152,96),//橙\r\n        new cc.Color(45,185,251),//蓝\r\n        new cc.Color(123,87,240),//紫\r\n        new cc.Color(61,230,146),//绿\r\n        new cc.Color(245,135,189),//粉\r\n        new cc.Color(253,253,122)//黄\r\n    ];\r\n\r\n    @property(KnifePool)\r\n    public knifePool:KnifePool = null;\r\n\r\n    @property(cc.Label)\r\n    public nameTxt:cc.Label = null;\r\n\t\r\n\t @property(cc.EditBox )\r\n    public nameexitTxt:cc.EditBox  = null;\r\n\t\r\n\r\n    @property()\r\n    public isAI:boolean = false;\r\n\r\n    @property(Body)\r\n    public body:Body = null;\r\n\r\n    @property(cc.Node)\r\n    public circle:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    public tail:cc.Node = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    public skins:cc.SpriteFrame[] = [];\r\n\r\n    public radius:number = 0;\r\n\r\n    public gameScene:GameScene = null;\r\n    \r\n\r\n    public moveDir:cc.Vec2 = cc.Vec2.ZERO;\r\n\r\n    public moveSpeed:number = 550;\r\n\r\n    private halfSize:cc.Size = cc.Size.ZERO;\r\n\r\n    public hp:number = 10;\r\n\r\n    public status:PlayerStatus  = PlayerStatus.defence;\r\n\r\n    public knifeId:number = 1;\r\n\r\n    public killCount:number = 0;\r\n\r\n    public showface:boolean = false;\r\n\r\n\r\n    private circleCollider:cc.CircleCollider = null;\r\n\r\n    private physicsCircleCollider:cc.CircleCollider = null;\r\n\r\n\r\n    private speedBufTime = 0;\r\n\r\n    private fhlBufTime = 0;\r\n\r\n    private magnetBufTime = 0;\r\n\r\n    public moveSpeedUp = 1;\r\n\r\n    public rotaSpeedUp = 1;\r\n\r\n    public circleRange = 1;\r\n\r\n\r\n    /**\r\n     * 仇家\r\n     */\r\n    public killer:Player = null;\r\n\r\n    public rank:number = 1;\r\n\r\n    private baseScale:number = 1;\r\n\r\n    private _size: number = 1;\r\n    public get size(): number {\r\n        return this._size;\r\n    }\r\n    public set size(value: number) {\r\n        this._size = value;\r\n        this.body.node.scale = this.baseScale * this._size;\r\n\r\n        /*if(!this.circleCollider)\r\n        {\r\n            this.circleCollider = this.getComponent(cc.CircleCollider);\r\n        } \r\n\r\n        this.circleCollider.radius = 200 * this._size * this.circleRange;*/\r\n\r\n\r\n        if(!this.physicsCircleCollider)\r\n        {\r\n            this.physicsCircleCollider = this.getComponent(cc.PhysicsCircleCollider);\r\n        } \r\n\r\n        this.physicsCircleCollider.radius = 75 * this._size;\r\n\r\n    }\r\n\r\n    private _pickRadius: number;\r\n    public get pickRadius(): number {\r\n        return this._pickRadius;\r\n    }\r\n    public set pickRadius(value: number) {\r\n        this._pickRadius = value;\r\n\r\n        if(!this.circleCollider)\r\n        {\r\n            this.circleCollider = this.getComponent(cc.CircleCollider);\r\n        } \r\n\r\n        this.circleCollider.radius = this._pickRadius * this.circleRange;\r\n\r\n    }\r\n\r\n    private _skin: number = 1;\r\n    public get skin(): number {\r\n        return this._skin;\r\n    }\r\n    public set skin(value: number) {\r\n\r\n        this._skin = Mathf.clamp(value,1,8);\r\n        this.body.skin.spriteFrame = this.skins[this._skin - 1];\r\n    }\r\n\r\n    \r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n       this.gameScene = this.node.parent.getComponent(GameScene);\r\n       this.baseScale = this.body.node.scale;\r\n       this.radius = this.body.getComponent(cc.CircleCollider).radius;\r\n       //this.body = this.getComponentInChildren(Body);\r\n       //this.body.node.color = new cc.Color(Random.Range(0,255),Random.Range(0,255),Random.Range(0,255));\r\n\r\n       //var index:number = Random.RangeInteger(0,Player.colorArr.length);\r\n       //this.colorId = index + 1;\r\n\r\n       //this.body.node.color = Player.colorArr[index];\r\n\t\t\r\n\t\t\r\n\t\t//\r\n\t\t\r\n    }\r\n\r\n    start () {\r\n\r\n        //var nameArr = [\"龙隼\",\"飞哥\",\"efsl\",\"拉啊啦\",\"何欢\",\"项少龙\",\"说书\",\"we11\",\"小胖子\"];\r\n        //var nameArr = DataManager.instance.nameConfigDatas;\r\n\r\n        //this.nameTxt.string = nameArr[Random.RangeInteger(0,nameArr.length)].name;\r\n        if(!this.isAI)\r\n        {\r\n            //this.circle.active = true;\r\n        }\r\n\r\n\t\t\r\n\t\tvar nn =  cc.sys.localStorage.getItem(\"playname\");\r\n\t\t\t\r\n\t\t\tif( nn== \"\" || nn==null || nn== undefined  )\r\n\t\t\t{\r\n\t\t\t\tnn = \"小李飞刀\";\r\n\t\t\t\tcc.sys.localStorage.setItem(\"playname\",nn);\r\n\t\t\t}\r\n\t\t\tif(this.nameexitTxt )\r\n\t\t\t{\r\n\t\t\t\tthis.nameexitTxt.string = nn;\r\n\t\t\t}\r\n\t\t\r\n\t\t\r\n    }\r\n\t\r\n\t\r\n\tnamechange()\r\n\t{\r\n\t\tif(this.nameexitTxt )\r\n\t\t\t{\r\n\t\t\r\n\t\t\tvar nn = this.nameexitTxt.string;\r\n\t\t\t\r\n\t\t\tif( nn!= \"\"  )\r\n\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\tcc.sys.localStorage.setItem(\"playname\",nn);\r\n\t\t\t}\r\n\t\t\tthis.setName(nn);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n    public onGameStart()\r\n    {\r\n        if(!this.isAI)\r\n        {\r\n            this.circle.active = true;\r\n        }\r\n\r\n        if(this.speedBufTime > 0)\r\n        {\r\n            this.tail.active = true;\r\n        }\r\n\r\n        this.body.updateState();\r\n\t\t\r\n\t\t\r\n\t\tif(this.nameexitTxt )\r\n\t\t{\r\n\t\t\tthis.nameTxt.node.active = true;\r\n\t\t\tthis.nameexitTxt.node.active = false;\r\n\t\t}\r\n\t\t\t\r\n    }\r\n\r\n\r\n    public getName():string\r\n    {\r\n        return this.nameTxt.string;\r\n    }\r\n\r\n    public onCollisionEnter(other:cc.Collider,self:cc.Collider)\r\n    {\r\n        \r\n        if(this.status == PlayerStatus.die)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        if(other.tag == 0)\r\n        {\r\n        }else if(other.tag == 1)\r\n        {\r\n            var knife:Knife = other.getComponent(Knife);\r\n\r\n            //cc.log(\"碰撞到了 other \",other,knife);\r\n\r\n            if(knife && knife.status == KnifeStatus.normal)\r\n            {\r\n                this.captureKnife(knife);\r\n            }\r\n            \r\n        }else if(other.tag == 8)\r\n        {\r\n            var item:Item = other.getComponent(Item);\r\n            switch(item.type)\r\n            {\r\n                case ItemType.fhl:\r\n                this.fhlItemEffect();\r\n                break;\r\n                case ItemType.rocket:\r\n\r\n                this.rocketItemEffect();\r\n                \r\n                break;\r\n                case ItemType.magnet:\r\n\r\n                this.magnetItemEffect();\r\n                \r\n                break;\r\n            }\r\n\r\n            item.destroySelf();\r\n\r\n        }else\r\n        {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * 类似unity 的OnCollisionEnter OnTriggerEnter的结合\r\n     * @param concact \r\n     * @param selfCollider \r\n     * @param otherColliser \r\n     */\r\n    public onBeginContact(concact:cc.PhysicsContact,selfCollider:cc.Collider,otherColliser:cc.Collider)\r\n    {\r\n        //cc.log(\"刚体发生碰撞了\",selfCollider.name);\r\n\r\n        var knife:Knife = otherColliser.getComponent(Knife);\r\n\r\n        if(knife && knife.status == KnifeStatus.normal)\r\n        {\r\n            this.captureKnife(knife);\r\n        }\r\n    }\r\n\r\n     update (dt) {\r\n\r\n        if(GameManager.instance.gameStatus == GameStatus.none)\r\n        {\r\n            return;\r\n        }\r\n        \r\n        if(this.speedBufTime > 0)\r\n        {\r\n            this.speedBufTime -= dt;\r\n            if(this.speedBufTime <= 0)\r\n            {\r\n                this.speedBufTime = 0;\r\n                this.moveSpeedUp = 1;\r\n                this.tail.active = false;\r\n            }\r\n        }\r\n\r\n        if(this.fhlBufTime > 0)\r\n        {\r\n            this.fhlBufTime -= dt;\r\n            if(this.fhlBufTime <= 0)\r\n            {\r\n                this.fhlBufTime = 0;\r\n                this.rotaSpeedUp = 1;\r\n            }\r\n        }\r\n\r\n        if(this.magnetBufTime > 0)\r\n        {\r\n            this.magnetBufTime -= dt;\r\n            if(this.magnetBufTime <= 0)\r\n            {\r\n                this.magnetBufTime = 0;\r\n                this.circleRange = 1;\r\n                this.size = this.size;\r\n            }\r\n        }\r\n\r\n\r\n        this.halfSize.width = (this.gameScene.sceneSize.width - 2 * this.radius * this.size) / 2 ;\r\n        this.halfSize.height = (this.gameScene.sceneSize.height - 2 * this.radius * this.size) / 2 ;\r\n\r\n        var pos:cc.Vec2 = this.node.position.add(this.moveDir.mul(this.getMoveSpeed() * dt));\r\n\r\n        if(pos.x < -this.halfSize.width)\r\n        {\r\n            pos.x = -this.halfSize.width;\r\n        }else if(pos.x > this.halfSize.width)\r\n        {\r\n            pos.x = this.halfSize.width;\r\n        }\r\n\r\n        if(pos.y < -this.halfSize.height)\r\n        {\r\n            pos.y = -this.halfSize.height;\r\n        }else if(pos.y > this.halfSize.height)\r\n        {\r\n            pos.y = this.halfSize.height;\r\n        }\r\n\r\n        this.node.position = pos;\r\n\r\n     }\r\n\r\n     public getMoveSpeed():number\r\n     {\r\n         return this.moveSpeed * this.moveSpeedUp;\r\n     }\r\n\r\n     public moveToTarget(targetPos:cc.Vec2)\r\n     {\r\n         this.moveDir = targetPos.sub(this.node.position).normalize();\r\n     }\r\n\r\n     public stopMove()\r\n     {\r\n         this.moveDir = cc.Vec2.ZERO;\r\n     }\r\n\r\n     public captureKnife(knife:Knife)\r\n     {\r\n         if(!this.isAI)\r\n         {\r\n            SoundManager.instance.playAudioClip(SoundClipType.pick);\r\n         }\r\n\r\n         this.knifePool.addKnife(knife);\r\n         this.gameScene.removeKnife(knife);\r\n     }\r\n\r\n     public changeDefenceState()\r\n     {\r\n         if(this.status != PlayerStatus.defence)\r\n         {\r\n            this.status = PlayerStatus.defence;\r\n            this.knifePool.changeDefenceState();\r\n            this.changeFace(0);\r\n         }\r\n     }\r\n\r\n     public changeAttackState()\r\n     {\r\n\r\n        if(this.status != PlayerStatus.attack)\r\n        {\r\n            this.status = PlayerStatus.attack;\r\n            this.knifePool.changeAttackState();\r\n            this.changeFace(1);\r\n        }\r\n        \r\n     }\r\n     \r\n     public initKnife(count:number)\r\n     {\r\n         this.knifePool.initKnife(count);\r\n     }\r\n\r\n     public randomKnifeSkin()\r\n     {\r\n        this.knifeId = Random.RangeInteger(1,DataManager.instance.knifeConfigDatas.length + 1);\r\n        //this.colorId = Random.RangeInteger(1,7);\r\n        this.updateKnifesSkin();\r\n     }\r\n\r\n     public setColor(color:cc.Color)\r\n     {\r\n        this.body.node.color = color;\r\n        this.circle.color = color;\r\n     }\r\n\r\n     public setName(name:string)\r\n     {\r\n        this.nameTxt.string = name;\r\n\r\n     }\r\n\r\n     public fhlItemEffect()\r\n     {\r\n         this.fhlBufTime = 10;\r\n         this.rotaSpeedUp = 2;\r\n     }\r\n\r\n     public rocketItemEffect()\r\n     {\r\n         this.speedBufTime = 10;\r\n         this.moveSpeedUp = 1.5;\r\n\r\n         if(GameManager.instance.gameStatus == GameStatus.start)\r\n         {\r\n            this.tail.active = true;\r\n         }\r\n\r\n     }\r\n\r\n     public magnetItemEffect()\r\n     {\r\n         this.magnetBufTime = 5;\r\n         this.circleRange = 1.5;\r\n         this.size = this.size;\r\n     }\r\n\r\n     public updateKnifesSkin()\r\n     {\r\n         this.knifePool.updateKnifesSkin(this.knifeId);\r\n     }\r\n\r\n\r\n     public setDamage(value:number,otherPlayer:Player)\r\n     {\r\n         if(this.status == PlayerStatus.die)\r\n         {\r\n             return;\r\n         }\r\n\r\n         this.hp -= value;\r\n\r\n         if(this.hp <= 0)\r\n         {\r\n             this.hp = 0;\r\n             this.status = PlayerStatus.die;\r\n             this.knifePool.disposeAllKnifes();\r\n\r\n             //this.node.destroy();\r\n\r\n             this.killer = otherPlayer;\r\n\r\n             this.node.active = false;\r\n\r\n             this.gameScene.playerKilled(otherPlayer,this);\r\n         }\r\n\r\n\r\n     }\r\n\r\n    public changeFace(index:number,timer:number = 0)\r\n    {\r\n\r\n        if(!this.showface)\r\n            return;\r\n\r\n        this.body.changeFace(index,timer);\r\n    }\r\n\r\n\r\n}\r\n"]}